@use '/app/base/sass/util/functions' as f;
@use '/app/film-database/scss/fdMixins' as m;

.fdCarousel {
  padding-bottom: calc(var(--fd-gap) * 2);
  transition: all 280ms cubic-bezier(0.445, 0.05, 0.55, 0.95);
  &[data-anim='disabled'] {
    opacity: 0;
    pointer-events: none;
  }
  &__header {
    width: fit-content;
    padding: 0 calc(var(--fd-carousel-node-width) / 4) var(--fd-gap) calc(var(--fd-padding-generic) / 1.5);
    text-transform: capitalize;
    &--h2 {
      @include m.fdFontXL;
    }
  }
  &__wrapper {
    position: relative;
    width: 100%;
    // navigation overlay on track hover
    &:hover &__navigation {
      opacity: 1;
      transition: opacity 0.22s ease-in-out;
    }
    &__ul {
      display: flex;
      gap: var(--fd-gap);
      overflow-x: scroll;
      scrollbar-width: none;
      scroll-behavior: smooth;
      &__li {
        position: relative;
        width: var(--fd-carousel-node-width);
        height: var(--fd-carousel-node-height);
        border-radius: var(--fd-borderRadius);
        overflow: clip;
        cursor: pointer;
        &:first-of-type {
          margin-left: calc(var(--fd-padding-generic) / 1.5);
        }
        &:last-of-type {
          margin-right: calc(var(--fd-padding-generic) / 1.5);
        }
        &[data-hidden='true'] {
          & picture img {
            display: none;
          }
        }
        &:hover {
          .fdCarousel__wrapper__ul__li__overlay {
            opacity: 1;
            cursor: pointer;
            &--play svg {
              transform: scale(1.3) rotate(0deg);
            }
          }
        }
        &:not(:hover) .fdCarousel__wrapper__ul__li__collections[data-active='true'] {
          opacity: 0;
        }
        & picture,
        & picture img {
          display: block;
          width: inherit;
          height: inherit;
        }
        &__overlay {
          position: absolute;
          inset: 0;
          z-index: 3;
          width: inherit;
          height: inherit;
          background-color: #00000052;
          opacity: 0;
          transition: opacity 0.3s ease-in-out;
          & button {
            position: absolute;
            & svg {
              width: 1.8em;
              height: 1.8em;
              color: white;
            }
          }
          &--collections {
            z-index: 4;
            top: calc(var(--fd-gap) / 2);
            right: calc(var(--fd-gap) / 4);
          }
          &--play {
            display: grid;
            place-items: center;
            width: inherit;
            height: inherit;
            & svg {
              transform: scale(0.8) rotate(45deg);
              transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
            }
          }
        }
        &__collections {
          position: absolute;
          top: calc(var(--fd-gap) * 3);
          right: var(--fd-gap);
          z-index: 5;
          display: flex;
          flex-direction: column;
          border: 1px solid rgba(16 18 27 / 40%);
          border-radius: var(--fd-borderRadius);
          overflow: clip;
          background-color: rgb(20, 20, 20);
          transition: all 0.2s ease;
          &[data-active='false'] {
            opacity: 0;
            pointer-events: none;
          }
          &[data-active='true'] {
            transform: translateY(calc(var(--fd-gap) / 4));
            opacity: 1;
            pointer-events: all;
          }
          & li {
            &:hover {
              background-color: rgb(36, 36, 36);
            }
            &:first-of-type button {
              border-top-left-radius: var(--fd-borderRadius);
              border-top-right-radius: var(--fd-borderRadius);
            }
            &:last-of-type button {
              border-bottom-right-radius: var(--fd-borderRadius);
              border-bottom-left-radius: var(--fd-borderRadius);
            }
            & button {
              padding: calc(var(--fd-gap) / 2);
              @include m.fdFontS;
              color: white;
              white-space: nowrap;
            }
          }
        }
      }
    }
    &__navigation {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 5;
      display: flex;
      align-items: center;
      width: 100svw;
      height: 100%;
      pointer-events: none;
      opacity: 0;
      // Greyzone/crosspath for desktop 1280x720 && tablet
      @media (width <= 1152px) {
        display: none;
      }
      &__button {
        position: absolute;
        z-index: 10;
        height: 50%;
        background-color: hsla(216, 100%, 3%, 0.5);
        pointer-events: all;
        & svg {
          width: 3em;
          height: 3em;
          color: white;
        }
      }
      &__button:nth-of-type(1) {
        left: 0;
        border-top-right-radius: var(--fd-borderRadius);
        border-bottom-right-radius: var(--fd-borderRadius);
      }
      &__button:nth-of-type(2) {
        right: 0;
        border-top-left-radius: var(--fd-borderRadius);
        border-bottom-left-radius: var(--fd-borderRadius);
      }
    }
  }
}
